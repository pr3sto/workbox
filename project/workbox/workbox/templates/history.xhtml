<html py:extends="master.xhtml" py:strip="True">

<head py:block="head" py:strip="True">
    <title py:block="master_title">Журнал | WorkBox</title>
    <link rel="stylesheet" type="text/css" media="screen" href="/css/history.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/css/datatables.min.css"/>
</head>

<body py:block="body" py:strip="True">
    <section id="history-header">
        <div class="container outer-center">
            <h1 class="inner-center">Журнал действий в <b>WorkBox</b></h1>
        </div>
    </section>
    <div class="table-wrapper container">
        <table id="history-table" class="table table-striped ">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Пользователь</th>
                    <th>Виртуальная рабочая среда</th>
                    <th>Время</th>
                    <th>Действие</th>
                </tr>
            </thead>
            <tbody>
                <py:for each="entry in entries">
                    <tr>
                        <td>${entry.history_id}</td>
                        <td>${entry.user.display_name}</td>
                        <td py:if="entry.box"><a href='/box/${entry.box.box_id}/'>#${entry.box.box_id}</a></td>
                        <td py:if="not entry.box">-</td>                        
                        <td>${entry.datetime.strftime("%Y-%m-%d %H:%M")}</td>
                        <td>${entry.info}</td>
                    </tr>
                </py:for>
            </tbody>
        </table>
    </div>
</body>

<script src="/js/datatables.min.js"></script>
<script type="text/javascript">
    $(function ($) {
        $('#history-table').dataTable({
            fixedHeader: {
                header: true,
                headerOffset: 50
            },
            pagingType: "numbers",
            language: {
                url: "/local/datatables.ru.lang"
            }
        });
    });
</script>

</html>
