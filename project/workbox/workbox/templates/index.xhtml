<html py:extends="master.xhtml" py:strip="True">

<head py:block="head" py:strip="True">
    <title py:block="master_title">WorkBox</title>
    <link rel="stylesheet" type="text/css" media="screen" href="/css/index.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/doughnnutChart.css" />
</head>

<body py:block="body" py:strip="True">

    <!-- not authorized user -->
    <div py:if="not request.identity">
        <section class="anon-welcome" id="welcome">
            <div class="container outer-center">
                <div class="inner-center" style="padding-bottom:100px;">
                    <img src="/images/box.png" />
                    <h1><b>WorkBox</b></h1>
                    <h2>Сервис для настройки, запуска и мониторинга виртуальных рабочих сред</h2>
                </div>
            </div>
            <div class="to-bottom">
                <a href="#usage"><span class="icomoon icon-arrow-down"></span></a>
            </div>
        </section>
        <section class="anon-usage" id="usage">
            <div class="container outer-center">
                <div class="inner-center">
                    <h1>Использование <b>WorkBox</b></h1>
                    <div class="col-xs-10 col-xs-offset-1">
                        <div class="paragraph">
                            <span class="icomoon icon-navigate_next"></span>
                            <div>
                                <h2>Проведение лабораторных занятий</h2>
                                <h3>
                                    Настраивайте и создавайте виртуальные рабочие среды, генерируйте данные для доступа к ним и раздавайте студентам. Благодаря
                                    тому, что виртуальная среда полностью изолирована, ее использование безопасно, а любые
                                    ошибки не выйдут за ее пределы.
                                </h3>
                            </div>
                        </div>
                        <div class="paragraph">
                            <span class="icomoon icon-navigate_next"></span>
                            <div>
                                <h2>Запуск программ</h2>
                                <h3>
                                    Необходимо использовать программу один раз, и поэтому не хочется устанавливать ее на свой компьютер? Нет проблем! Запустите
                                    ее в виртуальной среде всего за несколько минут.
                                </h3>
                            </div>
                        </div>
                        <div class="paragraph">
                            <span class="icomoon icon-navigate_next"></span>
                            <div>
                                <h2>Больше возможностей</h2>
                                <h3>
                                    Использование сервиса не ограничивается приведенными сценариями. Знаете другое применение виртуальной среды? Используйте
                                    сервис так, как хотите!
                                </h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="anon-authorize-request" id="account">
            <div class="container">
                <h1>Для работы с сервисом необходима <a href="/login/">авторизация</a></h1>
                <h2>Если у Вас нет аккаунта, пожалуйста, свяжитесь с администратором</h2>
            </div>
        </section>
    </div>

    <!-- authorized user -->
    <div py:if="request.identity">
        <section class="auth-welcome">
            <div class="container">
                <h1><b>${request.identity['user'].display_name}</b>, добро пожаловать в Ваш <b>WorkBox</b></h1>
            </div>
        </section>
        <section class="auth-statistics">
            <div class="container">
                <div class="col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-0 col-md-push-4" style="padding:0">
                    <div class="statistic-block">
                        <p><b>Загрузка сервиса</b></p>
                        <div id="doughnutGauge" class="chart chart-lg"></div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4 col-md-pull-4" style="padding:0">
                    <div class="statistic-block">
                        <p>&nbsp;</p>
                        <p>Ваши виртуальные среды</p>
                        <div id="doughnutChart1" class="chart chart-sm"></div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4" style="padding:0">
                    <div class="statistic-block">
                        <p>&nbsp;</p>
                        <p>Все виртуальные среды</p>
                        <div id="doughnutChart2" class="chart chart-sm"></div>
                    </div>
                </div>
            </div>
        </section>
        <section class="auth-chart">
            <div class="container">
                <p>Средняя загрузка сервиса за последние 7 дней:</p>
                <canvas id="chart" height="100"></canvas>
            </div>
        </section>
    </div>

    <script src="/js/jquery-3.1.1.min.js"></script>
    <script src="/js/jquery.drawDoughnutChart.js"></script>
    <script src="/js/smoothGotoRefference.js"></script>
    <script src="/js/colorsGenerator.js"></script>
    <script src="/js/Chart.min.js"></script>
    <script src="/js/drawChart.js"></script>
    <script type="text/javascript">
        $(function ($) {
            $('.anon-welcome').css('border-image', gen10colorsBorder());

            $('#doughnutGauge').drawDoughnutGauge(53);

            $('#doughnutChart1').drawDoughnutChart([
                { title: "Запущенные", value: 5, color: "#00C853" },
                { title: "Остановленные", value: 10, color: "#f44336" },
                { title: "Созданные", value: 3, color: "#00BCD4" }
            ]);

            $('#doughnutChart2').drawDoughnutChart([
                { title: "Запущенные", value: 120, color: "#00C853" },
                { title: "Остановленные", value: 80, color: "#f44336" },
                { title: "Созданные", value: 2000, color: "#00BCD4" }
            ]);

            var chart = document.getElementById('chart').getContext('2d');
            var inputData = {
                labels: ['Пн', 'Вт', 'Ср', 'Чтв', 'Пт', 'Сб', 'Вск'],
                data: [65, 59, 56, 44, 38, 5, 5]
            }
            drawChart(chart, inputData);
        });
    </script>
</body>

</html>
